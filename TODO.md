# TODO

## Demos

1. Tile design – gallery/5_tile_design.l1
    * needed functions:
        1. Tile
        1. GetDigit
1. Other
    * Iota
    * RankUp, RankDown
    * ArgMin, ArgMax, Sum, Product
    * StochasticGradientDescent
    * Gradient

## Language
* Operators for tensor
    * equal = ==
    * not equal !=
    * less than <
    * more than >
    * less than or equal <=
    * more than or equal >=

## Wholeness

1. Prelude
    * because many things can be written in L1
1. Traditional visualizations
    * Plots
        * What is the best plotting library?
            * should be able to continuously redraw itself with new data
        * What does TensorBoard use?
        * line, bar, scatter, ..?
        * `BarChart [0 1 2 3 4 5]`
        * `LineChart [0 1 2 3 4 5]`
        * `ScatterPlot [0 0, 1 1, 2 2, 3 3]` or `[0 1 2 3, 0 1 2 3]`
        * `BarChart [0 1 2, 3 4 5]`
        * `Chart { ... }`
1. Router
    * Must be hierarchical
        * I don't know what that means right now.
        * Can target part of the "notebook"?
    * kind of relevant – import from other notebooks
        * `:: #L1.#myNotebook.#rev111.functionOfInterest`
        * `#L1` object will do the loading (maybe different name?)
        * "rev" as from "revision" is unique version of the notebook
            * content-hashes would be awesome, but ugly
            * automatic numbering?
            * user-defined version?
1. How to directly compare two tensors?
    * `a: Zeros [10], b: Ones [10]
1. How to visualize high-rank tensors?
    * 1D, 2D slices?

## UX

1. When there is a error, selection is not visible
    * clashes with more than one error on the line
        * grouping errors by line?
1. Code completion provider which takes rootEnvironment as the source
1. History
    * what must be preserved (in state obj):
        * scrollOffset in board
        * scrollOffset in editor
        * cursor position in editor
1. working links in Markdown
1. Broken visual cue for scrolling the board
1. Visualization for empty tensor
    * right now it will crash :D
1. Correspondence between code and visualization
    * Focus
        * What part of visualization was generated by which part of the code?
        * What code generates which part of the visualization?
    * mockup would help and can be a good start


## Crazy

1. silent assignment folded by default?
1. Markdown for error messages
1. KaTeX for Markdown
    * would be super-convenient
1. Name resolution
    * Capitalized names could be resolved from root
        * or non-overideable through #meta
    * Capitalized names could be resolved by abbreviations (as in Moniel)
1. Tensors should be callable – indexing
    * `a: [1 2 3], c: a[0] ; c = 1 :D`
    * this way the second tensor is an address to the first one
    * `source: [1 2, 3 4], indices: [0 0, 1 1], result: source(indices) ; result = [1 4]`
    * this is the real shit!
    * (and `@` can stay for matmul, yay!)
1. `#render` (because of that "Can I create AI in HTML?" meme)
```L1
; mu: {
;     #render: props => (
;         <div>
;             <span>{props.name}</span>
;             <span>{props.surname}</span>
;         </div>
;     )
; }
mu: {
    #state: {
        name: "John"
        surname: "Doe"
    }
    #render: props => (
        {
            tag: "div"
            content: {
                child1: {
                    tag: "span"
                    content: props.name
                }
                child2: {
                    tag: "span"
                    content: props.surname
                }
            }
        }
    )
    #call: a => #render #state 
}

hu: mu!


```

## Random
* ::Self should be ::RTFM
* allow ! and () as a lambda argument?
* :: with expression
    * eliminates cognitive friction
    * empty string as a key
        * (as a shorthand for #valueOf or #return?)
        * user cannot use it before naming it – good
        * is forced to have only one non-named prop – good

## Bugs
    * rendering an <Issue /> is leaking because Monaco does not notify DOMNode removal
        * report issue in Monaco GitHub?

# Open questions

## How to mutate an existing object?

1. Is it even necessary?
1. Should it be allowed?
1. When is it a good idea?

What about this?

```L1
Counter: {
    i: 0
    increaseBy: x => {
        i: i + x
        increaseBy: x => { ; can't just ::increaseBy because of the wrong closure
            i: i + x
        }
    }
}

Counter: Counter.increaseBy 7
Counter: Counter.increaseBy 2
Counter: Counter.increaseBy 1 ; does not scale

; also, if Counter is shared, it won't work
```

### State object
One route may be having an explicit state object inside the normal object. State object could be mutated. However, there also needs to be a way to access parent/super/prototype object somehow...

```L1
Counter: {
    #state: {
        i: 0
    }
    increaseBy: x => {
        #state.i: #state.i + x
    }
}

mu1: Counter.increaseBy 3
mu2: Counter.increaseBy 3
```

Another approach:

```L1
Counter: {
    #state: {
        i: 0
        ; internal fn
        ; #call: newState => ()
    }
    increaseBy: x => #state {
        i: #state.i + x
    }
}

mu1: Counter.increaseBy 3
mu2: Counter.increaseBy 3
:: Counter.#state.i
```

So far, there should be a way to modify super/proto object. But then L1 cease to be pure. Object should not be changed directly from outside by force. But it should be able to change itself when asked nicely.

```L1
a: {
    b: 22
}
; a.b: 23
a: a.#mutate {
    b: 23
}

; looks really awful
```

# Links
* [Haskell syntax](https://www.haskell.org/onlinereport/exps.html)
* [Iterations in PEG](http://www.dalnefre.com/wp/2011/05/parsing-expression-grammars-part-4/)
* [Continuations by example](http://matt.might.net/articles/programming-with-continuations--exceptions-backtracking-search-threads-generators-coroutines/)
* [CPS in JS by example](http://matt.might.net/articles/by-example-continuation-passing-style/)
* [EinSum](https://rockt.github.io/2018/04/30/einsum#fn.2)
* [Firebase Cloud Fns](https://www.youtube.com/watch?v=prlK_QL_qOA)
* [Something New](https://github.com/d-cook/SomethingNew)
* [RxJS for mere mortal](https://stackoverflow.com/a/45227115)
